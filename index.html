<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SOI | Sistema de Organização Integrada</title>

  <!-- Tailwind (CDN - adequado para desenvolvimento; para produção compile o Tailwind) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary: '#0D9488', secondary: '#111827' },
          fontFamily: { sans: ['Inter', 'sans-serif'] }
        }
      }
    }
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="home_page/CSS/styles.css">
  <link rel="stylesheet" href="home_page/CSS/case-panel.css">
  <link rel="stylesheet" href="home_page/CSS/hero-controls.css">

  <meta name="description" content="SOI — Solução simples e acessível para digitalizar procedimentos internos de pequenas e médias empresas.">
  <meta name="theme-color" content="#0D9488">
</head>

<body class="font-sans bg-gray-50 text-secondary antialiased">
  <!-- Partials placeholders -->
  <div id="partial-navegacao" aria-hidden="true"></div>

  <main id="content" role="main" class="min-h-screen">
    <div id="partial-destaque" aria-hidden="true"></div>

    <!-- Problema carregado via partial -->
    <div id="partial-problema" aria-hidden="true"></div>

    <!-- Outros partials -->
    <div id="partial-solucao" aria-hidden="true"></div>
    <div id="partial-beneficios" aria-hidden="true"></div>
    <div id="partial-planos" aria-hidden="true"></div>
    <div id="partial-cta" aria-hidden="true"></div>
    <div id="partial-contato" aria-hidden="true"></div>
  </main>

  <div id="partial-rodape" aria-hidden="true"></div>

  <script>
    (function () {
      const BASE = 'home_page/factored/';
      const MAPPING = {
        'partial-navegacao': 'navegacao.html',
        'partial-destaque' : 'destaque.html',
        'partial-problema' : 'problema.html',
        'partial-solucao' : 'solucao.html',
        'partial-beneficios': 'beneficios.html',
        'partial-planos': 'planos.html',
        'partial-cta' : 'cta.html',
        'partial-contato' : 'contato.html',
        'partial-rodape' : 'rodape.html'
      };

      async function fetchHtml(path) {
        try {
          const res = await fetch(path, { cache: 'no-store' });
          if (!res.ok) throw new Error(res.status + ' ' + res.statusText);
          return await res.text();
        } catch (err) {
          console.warn('partials-loader: failed to load', path, err);
          return null;
        }
      }

      async function loadAll() {
        for (const [id, file] of Object.entries(MAPPING)) {
          const el = document.getElementById(id);
          if (!el) continue;
          const html = await fetchHtml(BASE + file);
          if (html !== null) {
            el.innerHTML = html;
            // allow accessible content to be announced after insertion
            el.removeAttribute('aria-hidden');
          } else {
            // keep aria-hidden true so assistive tech ignores empty placeholder
            el.setAttribute('aria-hidden', 'true');
          }
        }

        // signal that partials were loaded so dependent scripts can initialize reliably
        document.dispatchEvent(new CustomEvent('partials:loaded'));

        // If there's a hash, focus the target after partials are inserted
        if (location.hash) {
          const target = document.querySelector(location.hash);
          if (target) {
            target.setAttribute('tabindex', '-1');
            target.focus({ preventScroll: true });
          }
        }
      }

      // load after DOM ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadAll);
      } else {
        loadAll();
      }
    })();
  </script>

  <!-- Scripts -->
  <script src="home_page/JS/theme.js" defer></script>
  <script src="home_page/JS/case-panel.js" defer></script>
  <script src="home_page/JS/hero-rotator.js" defer></script>
  <script src="home_page/JS/form.js" defer></script>
  <script src="home_page/JS/tally-embed.js" defer></script>

  <!-- Accessibility keyboard hint -->
  <script>
    (function () {
      function handleFirstTab(e) {
        if (e.key === 'Tab') {
          document.documentElement.classList.add('user-is-tabbing');
          window.removeEventListener('keydown', handleFirstTab);
        }
      }
      window.addEventListener('keydown', handleFirstTab);
    })();
  </script>
</body>
</html>
